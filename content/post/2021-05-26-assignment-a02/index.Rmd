---
title: Assignment A02
author: Rajneetk
date: '2021-05-26'
slug: assignment-a02
categories: []
tags: []
---


Exploring mtcars dataset with Tidyverse


Description:

The mtcars dataset is downloaded from kaggle website.


1) Dataset information

    The mtcars dataset is a downloaded from kaggle. It comprises 11 features of 32 automobiles from the 1974 Motor       Trend US magazine. We will use it for data wrangling exercise.


2) Tidyverse and dplyr library would be used.



## Importing data from mtcars.csv file


```{r, warning=FALSE}

library(tidyverse)
library(gridExtra)
library(dplyr)

mtcars <- read_csv("mtcars.csv")
head(mtcars)
names(mtcars)

```



## One table verb

1)select to keep variables, here mpg and cyl is kept.

```{r}
mtcars %>%
  select(mpg, cyl)
  
```


2) Arrange in ascending / descending order,slice for certain row numbers and filter to select a subset of rows.
   disp is arranged in descending order, slice for five row number and filter to select vs of rows.

```{r}
library(dplyr)
library(tidyverse)

mtcars %>%
  select(mpg, disp, wt, qsec, vs) %>%
  arrange(desc(disp)) %>%
  slice(1:5) %>%
  filter(vs == 0) 
```

## mutate to add a new variable

3) Mutate
   Mutating joins allow you to combine variables from multiple tables.Vs_am is added as a new variable by mutate.

```{r}
mtcars %>%
  mutate(vs_am = vs + am) %>%
  select(vs, am, vs_am) %>%
  arrange(desc(vs_am))
```


## Two table verbs

A single data table is rare for a data analysis.We usually have a number of tables for analysis and flexible tools to bring them together.

1) Left_join: 
   The left_join keyword returns all records from the left table (table_1), and the matching records from the right     table (table_2).

```{r}
library(dplyr)
library(tidyverse)

table_1  <- mtcars   %>%
  select(X1,mpg,cyl)
table_2 <- mtcars  %>%
  select(X1,vs,am)


table_1
table_2

table_1  %>%  left_join(table_2)
```


2) full_join():
   Keeps all of the entries in both tables, regardless of whether or not they appear in the other table.
   
```{r}

library(dplyr)
library(tidyverse)

table_3  <- mtcars   %>%
  select(X1,gear,carb)
table_4 <- mtcars  %>%
  select(X1,drat,wt,vs)


table_3
table_4

table_3  %>%  full_join(table_4)

```
   


## Grouping 

Most data operations are done on groups defined by variables group_by() and converts it into a group where operations are performed "by group". ungroup() removes grouping.

 1) It changes how it acts with the other dplyr verbs:
 
```{r}
library(dplyr)
library(tidyverse)

by_cyl %>% summarise(
  disp = mean(disp),
  hp = mean(hp)
)
```


 2) summarise() removes a layer of grouping
 
```{r}

by_gear_carb <- mtcars %>% 
  group_by(gear, carb)

by_gear <- by_gear_carb %>% 
  summarise(n = n())
by_gear

mtcars %>% 
  group_by(gearcarb = gear + carb)

```
 
## Vector function
   1)logical operators applied to generate output with rows of data where column mpg is between 15 and 20(excluding       15 and 20) and rows of data where column cyl is equal to 6 and column am is not 0.
 
```{r}
v <- mtcars


 v[v$mpg > 15 & v$mpg < 20,]
 v[v$cyl == 6 & v$am  != 0,]
 
```
 
  2) Vectors can be constructed with c(), :, or seq().

```{r}
5:10
c(seq(2,20,by=2),seq(1,20,by=2))
mtcars[c(1,3,5,7,9),]
```
 
## Pivoting

Describes the use of the new pivot_longer() and pivot_wider() functions. Their goal is to improve the usability of gather() and spread().

1) pivot_longer:
   increasing the number of rows and decreasing the number of columns.
   
```{r}

library(tidyverse)

pivot_longer(
  mtcars,
  vs, 
  names_to = "vs old", 
  values_to = "vs new"
  )

```

2) pivot_wider:
   Widens data, increasing the number of columns and decreasing the number of rows. The inverse transformation is       pivot_longer().

```{r}

mtcars %>%
  select(cyl, vs) %>%
  add_count(cyl, name = "cyl_n") %>%
  pivot_wider(
    names_from = cyl,
    values_from = cyl_n,
    names_prefix = "cyl_",
    values_fn = list(cyl_n = mean)
  )
    
```

## Missing value

The mtcars dataset has some missing values.

  Following are the 3 tidyr functions that are handy for processing Missing Values

  1) drop_na()-drops/removes the rows/entries with Missing Values
  2) fill()- fills the NAs (missing values) in selected columns 
  3) replace_na()-used when you have got the replacement value which the NAs should be filled with.
  
```{r}

library(dplyr)

df <- mtcars

df$hp[2] <- NA
df$cyl[5] <- NA
df$gear[5] <- NA
df$mpg[10] <- NA

# counting number of missing values
paste("Number of Missing Values", sum(is.na(df)))

df_no_na <- drop_na(df)
paste("Number of Missing Values", sum(is.na(df_no_na)))

paste("Number of Rows",nrow(df_no_na))
paste("Number of Columns",ncol(df_no_na))



df_na_filled <- df %>% 
                    fill(
                      dplyr::everything()
                    )


# counting number of missing values
paste("Number of Missing Values", sum(is.na(df_na_filled)))
paste("Number of Rows",nrow(df_na_filled))
paste("Number of Columns",ncol(df_na_filled))

# replaced their values with NAs
df_na_replaced <- df %>% 
                    mutate_if(is.numeric, replace_na,0)

```

